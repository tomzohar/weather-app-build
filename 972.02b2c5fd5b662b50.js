"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[972],{1972:(V,m,a)=>{a.r(m),a.d(m,{FavoritesComponent:()=>_,FavoritesModule:()=>j,FavoritesService:()=>I});var t=a(4650);let I=(()=>{class e{constructor(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var l=a(4315),S=a(3900),h=a(9841),T=a(4004),Z=a(8505),u=a(262),C=a(515),w=a(655),v=a(2571),d=a(4494);let M=(()=>{let e=class g extends l.yh{constructor(){super(function Q(){return{favorites:v.n.getItem(d.d.favorites)||[]}}())}static#t=this.\u0275fac=function(o){return new(o||g)};static#e=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac})};return e=(0,w.gn)([(0,l.yC)({name:"favorites"})],e),e})();var $=a(2964),z=a(6020),U=a(4187);let x=(()=>{class e extends l.AE{constructor(n,o,i,r){super(n),this.store=n,this.weatherApiService=o,this.weatherSearchService=i,this.alertService=r,this.favorites$=this.select("favorites").pipe((0,S.w)(c=>(0,h.a)(c.map(L=>(0,h.a)([this.getCurrentWeather(L),this.getLocation(L)]).pipe((0,T.U)(([H,R])=>({...H,...R,isFavorite:!0})),(0,Z.b)(()=>this.store.setLoading(!1)))))))}setFavorites(n){this.store.update(o=>({favorites:n}))}setLoading(n){this.store.setLoading(n)}getLocation(n){return this.weatherSearchService.getLocationByKey(n).pipe((0,u.K)(o=>(this.alertService.showAlert(o.message),C.E)))}getCurrentWeather(n){return this.weatherApiService.getCurrentWeather(n).pipe((0,u.K)(o=>(this.alertService.showAlert(o.message),C.E)))}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(M),t.LFG($.u),t.LFG(z.b),t.LFG(U.c))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var B=a(7901),E=a(859),f=a(9197),p=a(6895),y=a(7214),F=a(7434),O=a(6325),P=a(4164),A=a(4152);function J(e,s){1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"app-loader"),t.qZA(),t.BQk())}function N(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.AsE(" ",n.Temperature.Metric.Value,"",n.Temperature.Metric.Unit," ")}}function Y(e,s){if(1&e&&t._uU(0),2&e){const n=t.oxw().$implicit;t.AsE(" ",n.Temperature.Imperial.Value,"",n.Temperature.Imperial.Unit," ")}}function G(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-card")(2,"div",3)(3,"div",4),t._UZ(4,"img",5),t.qZA(),t.TgZ(5,"div",6)(6,"div",7)(7,"h2"),t._uU(8),t.qZA()(),t.TgZ(9,"h3",8),t._UZ(10,"app-icon",9),t.YNc(11,N,2,2,"ng-container",10),t.YNc(12,Y,1,2,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(14,"div",12)(15,"p"),t._uU(16),t.qZA()()(),t.TgZ(17,"div",13)(18,"app-favorite-toggle",14),t.NdJ("changed",function(){const r=t.CHM(n).$implicit,c=t.oxw(2);return t.KtG(c.onFavoriteChange(r.Key))}),t.qZA(),t.TgZ(19,"app-button",15),t.NdJ("clicked",function(){const r=t.CHM(n).$implicit,c=t.oxw(2);return t.KtG(c.onSelectLocation(r))}),t._UZ(20,"app-icon",16),t.qZA()()()(),t.BQk()}if(2&e){const n=s.$implicit,o=t.MAs(13),i=t.oxw().ngIf,r=t.oxw();t.xp6(4),t.Q6J("src",r.getIcon(n.WeatherIcon),t.LSH),t.xp6(4),t.AsE("",n.AdministrativeArea.LocalizedName,", ",n.Country.LocalizedName,""),t.xp6(3),t.Q6J("ngIf",i.isMetric)("ngIfElse",o),t.xp6(5),t.hij(" ",n.WeatherText," "),t.xp6(2),t.Q6J("isFavorite",n.isFavorite)}}function K(e,s){if(1&e&&(t.ynx(0),t.YNc(1,G,21,7,"ng-container",2),t.BQk()),2&e){const n=s.ngIf;t.xp6(1),t.Q6J("ngForOf",n.favorites)}}let _=(()=>{class e{constructor(){this.favoritesQuery=(0,t.f3M)(x),this.appCore=(0,t.f3M)(B.w),this.router=(0,t.f3M)(f.F0),this.favorites$=this.favoritesQuery.favorites$,this.isMetric$=this.appCore.isMetric$,this.loading$=this.favoritesQuery.selectLoading(),this.viewData$=(0,h.a)({favorites:this.favorites$,isMetric:this.isMetric$})}ngOnInit(){this.favoritesQuery.setLoading(!0)}getIcon(n){return(0,E.q)(n)}onSelectLocation(n){this.appCore.setCurrentLocation(n),this.router.navigate(["/home"])}onFavoriteChange(n){let o=v.n.getItem(d.d.favorites);o=o.filter(i=>i!==n),v.n.setItem({key:d.d.favorites,item:o}),this.favoritesQuery.setFavorites(o)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["lib-favorites"]],features:[t._Bn([M,x])],decls:4,vars:6,consts:[[4,"ngIf"],[1,"loader-wrapper"],[4,"ngFor","ngForOf"],[1,"card-content"],[1,"icon"],["width","200","height","90","alt","current_weather_icon",3,"src"],[1,"weather"],[1,"location"],[1,"temperature"],["icon","thermostat"],[4,"ngIf","ngIfElse"],["imperial",""],[1,"details"],[1,"actions"],[3,"isFavorite","changed"],[3,"clicked"],["icon","arrow_forward"]],template:function(o,i){1&o&&(t.YNc(0,J,3,0,"ng-container",0),t.ALo(1,"async"),t.YNc(2,K,2,1,"ng-container",0),t.ALo(3,"async")),2&o&&(t.Q6J("ngIf",t.lcZ(1,2,i.loading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,i.viewData$)))},dependencies:[p.sg,p.O5,y.A,F.Q,O.o,P.r,A.R,p.Ov],styles:["[_nghost-%COMP%]{display:block;padding:24px 80px;background:var(--clr-bg);min-height:calc(100vh - var(--toolbar-height));height:calc(100% - var(--toolbar-height))}[_nghost-%COMP%]   .loader-wrapper[_ngcontent-%COMP%]{display:grid;place-content:center}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]{display:block;margin-top:24px}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .temperature[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:start}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{margin-top:4px}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center}@media only screen and (max-width: 800px){[_nghost-%COMP%]{padding:16px 24px}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:70px}[_nghost-%COMP%]   app-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{align-items:end}}"],changeDetection:0})}return e})();const W=[{path:"",component:_}];let D=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(W),f.Bz]})}return e})(),j=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[p.ez,D,y.A,F.Q,O.o,P.r,A.R]})}return e})()}}]);